<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm py-3 border-bottom">
  <div class="container-fluid px-4">
    <a class="navbar-brand d-flex align-items-center gap-2" routerLink="/">
      <img src="https://logosenvector.com/logo/img/bata-12563.jpg" alt="logo" width="120" height="120" />
    </a>

    <form class="d-flex mx-lg-4 my-3 my-lg-0 flex-grow-1" (submit)="onSearch($event)">
      <input type="search" class="form-control me-2 rounded-pill shadow-sm px-3"
             [(ngModel)]="searchQuery" name="q" placeholder="Buscar productos...">
      <button class="btn btn-outline-primary rounded-pill px-4">Buscar</button>
    </form>

    <ul class="navbar-nav ms-auto align-items-center gap-3">
      <li class="nav-item">
        <a class="nav-link" routerLink="/orders">
          <i class="bi bi-bag-check"></i>
          <span class="ms-1">Pedidos ({{ orderCountValue }})</span>
        </a>
      </li>

      <li class="nav-item position-relative">
        <a class="nav-link" routerLink="/cart" title="Carrito">
          <i class="bi bi-cart3 fs-5"></i>
          <span *ngIf="cartCount() > 0"
                class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
            {{ cartCount() }}
          </span>
        </a>
      </li>

      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown">
          {{ username() || 'Invitado' }}
        </a>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" routerLink="/profile">Perfil</a></li>
          <li><hr class="dropdown-divider"></li>
          <li *ngIf="username(); else loginTpl"><a class="dropdown-item" (click)="logout()">Salir</a></li>
        </ul>
        <ng-template #loginTpl><a class="dropdown-item" (click)="login()">Ingresar</a></ng-template>
      </li>
    </ul>
  </div>
</nav>
